###########################
# - Anglo-American Events (Conference etc)
# - By SuperMarks & RaptorJesus
###########################

add_namespace = anam

#############################
# - Conference in October '36
#############################


country_event = {
	id = anam.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.1"}
	title = "Conference Preparations"
	desc = {
		trigger = {
			original_tag = ENG
		}
		text = anam.1a.d
	}
	desc = {
		trigger = {
			original_tag = USA
		}
		text = anam.1b.d
	}
	picture = report_event_generic_conference
	
	is_triggered_only = yes
	
	immediate = { 
		set_variable = {
			var = day1
			value = 0
		}
		set_variable = {
			var = day2
			value = 0
		}
		set_variable = {
			var = day3
			value = 0
		}
		set_variable = {
			var = day4
			value = 0
		}
		set_variable = {
			var = day5
			value = 0
		}
		set_variable = {
			var = conference_chance
			value = 0
		}
	}
	
	option = {
		name = "Begin preparations immediately"
		hidden_effect = {
			IF = {
				limit = {
					original_tag = ENG
				}
				country_event = { id = anam.2 days = 30 }
			}
			IF = {
				limit = {
					original_tag = USA
				}
				country_event = { id = anam.2 days = 30 }
			}
		}
	}
}

country_event = {
	id = anam.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.2"}
	title = "Anglo-American Conference Begins"
	desc = {
		trigger = {
			original_tag = ENG
		}
		text = anam.2a.d
	}
	desc = {
		trigger = {
			original_tag = USA
		}
		text = anam.2b.d
	}
	picture = report_event_generic_conference
	
	is_triggered_only = yes
	
	option = {
		name = "Excellent"
		custom_effect_tooltip = anamwarning
		hidden_effect = {
			IF = {
				limit = {
					original_tag = ENG
				}
				country_event = { id = anam.3 days = 1 }
			}
		}
	}
}

country_event = {
	id = anam.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.3"}
	title = "Day 1: Naval Build-Up"
	desc = {
		trigger = {
			original_tag = ENG
		}
		text = anam.3a.d
	}
	desc = {
		trigger = {
			original_tag = USA
		}
		text = anam.3b.d
	}
	picture = report_event_generic_conference
	
	is_triggered_only = yes
	
	# - UK Options
	
	option = {
		trigger = {
			original_tag = ENG
		}
		name = "Britain must remain the dominant naval power, with no exceptions."
		ai_chance = {
			base = 50
			modifier = {
				ENG = { has_country_flag = capesingapore }
				add = 25
			}
			modifier = {
				ENG = { has_country_flag = avenging1776 }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = reformentente }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = isoimpfed }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = challengefrance }
				add = -25
			}
		}
		hidden_effect = {
			add_to_variable = {
				var = day1
				value = -1
			}
			USA = { country_event = { id = anam.3 hours = 3 } }
		}
	}
	
	option = {
		trigger = {
			original_tag = ENG
		}
		name = "For the sake of the economy we must limit further naval construction."
		ai_chance = {
			base = 50
			modifier = {
				ENG = { has_country_flag = capesingapore }
				add = -25
			}
			modifier = {
				ENG = { has_country_flag = avenging1776 }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = reformentente }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = isoimpfed }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = challengefrance }
				add = 25
			}
		}
		hidden_effect = {
			add_to_variable = {
				var = day1
				value = 1
			}
			USA = { country_event = { id = anam.3 hours = 3 } }
			set_country_flag = naval_treaty
		}
	}
	
	# - US Options
	
	option = {
		trigger = {
			original_tag = USA
		}
		name = "Limits on ship-building do not serve our interests."
		hidden_effect = {
			add_to_variable = {
				var = day1
				value = -1
			}
			ENG = { country_event = { id = anam.4 days = 1 } }
		}
	}
	
	option = {
		trigger = {
			original_tag = USA
		}
		name = "A naval agreement between our two nations will ensure peace."
		hidden_effect = {
			add_to_variable = {
				var = day1
				value = 1
			}
			ENG = { country_event = { id = anam.4 days = 1 } }
			set_country_flag = naval_treaty
		}
	}
}

country_event = {
	id = anam.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.4"}
	title = "Day 2: Pacific Tensions"
	desc = {
		trigger = {
			original_tag = ENG
		}
		text = anam.4a.d
	}
	desc = {
		trigger = {
			original_tag = USA
		}
		text = anam.4b.d
	}
	picture = report_event_generic_conference
	
	is_triggered_only = yes
	
	# - UK Options
	
	option = {
		trigger = {
			original_tag = ENG
		}
		name = "Influence over the Pacific should be shared with our American friends."
		ai_chance = {
			base = 50
			modifier = {
				ENG = { has_country_flag = capesingapore }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = avenging1776 }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = reformentente }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = isoimpfed }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = challengefrance }
				add = 50
			}
		}
		hidden_effect = {
			add_to_variable = {
				var = day2
				value = 1
			}
			USA = { country_event = { id = anam.4 hours = 3 } }
		}
	}
	
	option = {
		trigger = {
			original_tag = ENG
		}
		name = "We do not tolerate other Great Powers meddling in our affairs."
		ai_chance = {
			base = 50
			modifier = {
				ENG = { has_country_flag = capesingapore }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = avenging1776 }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = reformentente }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = isoimpfed }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = challengefrance }
				add = -50
			}
		}
		hidden_effect = {
			add_to_variable = {
				var = day2
				value = -1
			}
			USA = { country_event = { id = anam.4 hours = 3 } }
		}
	}
	
	# - US Options
	
	option = {
		trigger = {
			original_tag = USA
		}
		name = "For security's sake, influence in the Pacific should be divided between our nations."
		hidden_effect = {
			add_to_variable = {
				var = day2
				value = 1
			}
			ENG = { country_event = { id = anam.5 days = 1 } }
		}
	}
	
	option = {
		trigger = {
			original_tag = USA
		}
		name = "Imperialist powers have no place in the Pacific."
		hidden_effect = {
			add_to_variable = {
				var = day2
				value = -1
			}
			ENG = { country_event = { id = anam.5 days = 1 } }
		}
	}
}

country_event = {
	id = anam.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.5"}
	title = "Day 3: Economic Developments"
	desc = {
		trigger = {
			original_tag = ENG
		}
		text = anam.5a.d
	}
	desc = {
		trigger = {
			original_tag = USA
		}
		text = anam.5b.d
	}
	picture = report_event_generic_conference
	
	is_triggered_only = yes
	
	# - UK Options
	
	option = {
		trigger = {
			original_tag = ENG
		}
		name = "Through cooperation we can hopefully alleviate the worst of the crisis."
		ai_chance = {
			base = 50
			modifier = {
				ENG = { has_country_flag = capesingapore }
				add = -25
			}
			modifier = {
				ENG = { has_country_flag = avenging1776 }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = reformentente }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = isoimpfed }
				add = -25
			}
			modifier = {
				ENG = { has_country_flag = challengefrance }
				add = 50
			}
		}
		hidden_effect = {
			add_to_variable = {
				var = day3
				value = 1
			}
			USA = { country_event = { id = anam.5 hours = 3 } }
			set_country_flag = econ_treaty
		}
	}
	
	option = {
		trigger = {
			original_tag = ENG
		}
		name = "We must worry about our own economy first."
		hidden_effect = {
			add_to_variable = {
				var = day3
				value = -1
			}
			USA = { country_event = { id = anam.5 hours = 3 } }
		}
	}
	
	# - US Options
	
	option = {
		trigger = {
			original_tag = USA
		}
		name = "Economic cooperation will only ensure profit for both of our nations."
		hidden_effect = {
			add_to_variable = {
				var = day3
				value = 1
			}
			ENG = { country_event = { id = anam.6 days = 1 } }
			set_country_flag = econ_treaty
		}
	}
	
	option = {
		trigger = {
			original_tag = USA
		}
		name = "American citizens must be placed above the interests of others."
		hidden_effect = {
			add_to_variable = {
				var = day3
				value = -1
			}
			ENG = { country_event = { id = anam.6 days = 1 } }
		}
	}
}

country_event = {
	id = anam.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.6"}
	title = "Day 4: European Diplomacy"
	desc = {
		trigger = {
			original_tag = ENG
		}
		text = anam.6a.d
	}
	desc = {
		trigger = {
			original_tag = USA
		}
		text = anam.6b.d
	}
	picture = report_event_generic_conference
	
	is_triggered_only = yes
	
	# - UK Options
	
	option = {
		trigger = {
			original_tag = ENG
		}
		name = "Diplomatic cooperation between our two nations will ensure our power is solidifed."
		ai_chance = {
			base = 50
			modifier = {
				ENG = { has_country_flag = capesingapore }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = avenging1776 }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = reformentente }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = isoimpfed }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = challengefrance }
				add = -50
			}
		}
		hidden_effect = {
			add_to_variable = {
				var = day4
				value = 1
			}
			USA = { country_event = { id = anam.6 hours = 3 } }
		}
	}
	
	option = {
		trigger = {
			original_tag = ENG
		}
		name = "Britain must forge its own foreign policy free from hinderance."
		ai_chance = {
			base = 50
			modifier = {
				ENG = { has_country_flag = capesingapore }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = avenging1776 }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = reformentente }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = isoimpfed }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = challengefrance }
				add = 50
			}
		}
		hidden_effect = {
			add_to_variable = {
				var = day4
				value = -1
			}
			USA = { country_event = { id = anam.6 hours = 3 } }
		}
	}
	
	# - US Options
	
	option = {
		trigger = {
			original_tag = USA
		}
		name = "Support for one another's diplomatic efforts will only foster closer relations."
		hidden_effect = {
			add_to_variable = {
				var = day4
				value = 1
			}
			ENG = { country_event = { id = anam.10 hours = 3 } }
		}
	}
	
	option = {
		trigger = {
			original_tag = USA
		}
		name = "America's interests must come before the interests of other countries."
		hidden_effect = {
			add_to_variable = {
				var = day4
				value = -1
			}
			ENG = { country_event = { id = anam.10 hours = 3 } }
		}
	}
}

country_event = {
	id = anam.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.10"}
	title = "Day 5: Japanese Expansionism"
	desc = {
		trigger = {
			original_tag = ENG
		}
		text = anam.10a.d
	}
	desc = {
		trigger = {
			original_tag = USA
		}
		text = anam.10b.d
	}
	picture = report_event_generic_conference
	
	is_triggered_only = yes
	
	# - UK Options
	
	option = {
		trigger = {
			original_tag = ENG
		}
		name = "Japan's expansion must be halted, by intervention if necessary."
		ai_chance = {
			base = 50
			modifier = {
				ENG = { has_country_flag = capesingapore }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = avenging1776 }
				add = 25
			}
			modifier = {
				ENG = { has_country_flag = reformentente }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = isoimpfed }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = challengefrance }
				add = 50
			}
		}
		hidden_effect = {
			add_to_variable = {
				var = day5
				value = 1
			}
			USA = { country_event = { id = anam.10 hours = 3 } }
		}
	}
	
	option = {
		trigger = {
			original_tag = ENG
		}
		name = "The Empire of Japan is free to do as they wish."
		ai_chance = {
			base = 50
			modifier = {
				ENG = { has_country_flag = capesingapore }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = avenging1776 }
				add = 25
			}
			modifier = {
				ENG = { has_country_flag = reformentente }
				add = 50
			}
			modifier = {
				ENG = { has_country_flag = isoimpfed }
				add = -50
			}
			modifier = {
				ENG = { has_country_flag = challengefrance }
				add = 50
			}
		}
		hidden_effect = {
			add_to_variable = {
				var = day5
				value = -1
			}
			USA = { country_event = { id = anam.10 hours = 3 } }
		}
	}
	
	# - US Options
	
	option = {
		trigger = {
			original_tag = USA
		}
		name = "The Empire of Japan must not be allowed to expand unhindered"
		hidden_effect = {
			add_to_variable = {
				var = day5
				value = 1
			}
			ENG = { country_event = { id = anam.7 hours = 3 } }
		}
	}
	
	option = {
		trigger = {
			original_tag = USA
		}
		name = "Japanese expansion is of no concern to our Government"
		hidden_effect = {
			add_to_variable = {
				var = day5
				value = -1
			}
			ENG = { country_event = { id = anam.7 hours = 3 } }
		}
	}
}

country_event = {
	id = anam.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.7"}
	title = ""
	desc = anam.7.d
	
	is_triggered_only = yes
	
	hidden = yes
	
	immediate = {
		IF = {
			limit = {
				check_variable = {
					day1 > 0
				}
			}
			add_to_variable = {
				var = conference_chance
				value = 1
			}
		}
		IF = {
			limit = {
				check_variable = {
					day2 > 0
				}
			}
			add_to_variable = {
				var = conference_chance
				value = 1
			}
		}
		IF = {
			limit = {
				check_variable = {
					day3 > 0
				}
			}
			add_to_variable = {
				var = conference_chance
				value = 1
			}
		}
		IF = {
			limit = {
				check_variable = {
					day4 > 0
				}
			}
			add_to_variable = {
				var = conference_chance
				value = 1
			}
		}
		IF = {
			limit = {
				check_variable = {
					day5 > 0
				}
			}
			add_to_variable = {
				var = conference_chance
				value = 1
			}
		}
		IF = {
			limit = {
				check_variable = {
					conference_chance > 1
				}
			}
			ENG = { set_country_flag = conference_success_36 }
			USA = { set_country_flag = conference_success_36 }
		}
		IF = {
			limit = {
				check_variable = {
					conference_chance < 2
				}
			}
			ENG = { set_country_flag = conference_failure_36 }
			USA = { set_country_flag = conference_failure_36 }
		}
		ENG = { country_event = { id = anam.8 days = 1 } }
		USA = { country_event = { id = anam.8 days = 1 } }
	}
}

country_event = {
	id = anam.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.8"}
	title = {
		trigger = {
			has_country_flag = conference_success_36
		}
		text = "Anglo-American Conference Succeeds"
	}
	title = {
		trigger = {
			has_country_flag = conference_failure_36
		}
		text = "Anglo-American Conference Collapses"
	}
	desc = {
		trigger = {
			original_tag = ENG
			has_country_flag = conference_success_36
		}
		text = anam.8a1.d
	}
	desc = {
		trigger = {
			original_tag = ENG
			has_country_flag = conference_failure_36
		}
		text = anam.8a2.d
	}
	desc = {
		trigger = {
			original_tag = USA
			has_country_flag = conference_success_36
		}
		text = anam.8b1.d
	}
	desc = {
		trigger = {
			original_tag = USA
			has_country_flag = conference_failure_36
		}
		text = anam.8b2.d
	}
	picture = report_event_generic_conference
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { 
			ENG = { country_event = { id = anam.9 days = 1 } }
		}
	}
	
	# - UK Options
	
	option = {
		trigger = {
			original_tag = ENG
			has_country_flag = conference_success_36
		}
		name = "A toast to our American friends!"
		IF = {
			limit = {
				ENG = { has_country_flag = naval_treaty }
				USA = { has_country_flag = naval_treaty }
			}
			add_ideas = AA_ottawa_treaty
		}
		IF = {
			limit = {
				ENG = { has_country_flag = econ_treaty }
				USA = { has_country_flag = econ_treaty }
			}
			add_ideas = AA_econ_coop
		}
		add_political_power = 100
		add_opinion_modifier = {
			modifier = AA_successful
			target = USA
		}
	}
	
	option = {
		trigger = {
			original_tag = ENG
			has_country_flag = conference_failure_36
		}
		name = "Those block-headed idiots wouldn't compromise!"
		add_opinion_modifier = {
			modifier = AA_failure
			target = USA
		}
	}
	
	# - US Options
	
	option = {
		trigger = {
			original_tag = USA
			has_country_flag = conference_success_36
		}
		name = "To a beneficial relationship for both!"
		IF = {
			limit = {
				ENG = { has_country_flag = naval_treaty }
				USA = { has_country_flag = naval_treaty }
			}
			add_ideas = AA_ottawa_treaty
		}
		IF = {
			limit = {
				ENG = { has_country_flag = econ_treaty }
				USA = { has_country_flag = econ_treaty }
			}
			add_ideas = AA_econ_coop
		}
		add_political_power = 100
		add_opinion_modifier = {
			modifier = AA_successful
			target = ENG
		}
	}
	
	option = {
		trigger = {
			original_tag = USA
			has_country_flag = conference_failure_36
		}
		name = "Those stubborn idiots need to realise it's not the 19thC anymore!"
		add_opinion_modifier = {
			modifier = AA_failure
			target = ENG
		}
	}
}

country_event = {
	id = anam.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.9"}
	title = ""
	desc = anam.9.d
	
	is_triggered_only = yes
	
	hidden = yes
	
	immediate = {
		clear_variable = day1
		clear_variable = day2
		clear_variable = day3
		clear_variable = day4
		clear_variable = conference_chance
	}
}

country_event = {
	id = anam.11
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.11"}
	title = "Pacific Defence Organisation"
	desc = anam.11.d
	picture = report_event_generic_conference
	
	is_triggered_only = yes
	
	fire_only_once = no
	
	option = {
		name = "This will ensure that the Pacific remains the peaceful sea."
		IF = {
			limit = {
				original_tag = ENG
			}
			add_opinion_modifier = {
				modifier = AA_pacific_do
				target = USA
			}
		}
		IF = {
			limit = {
				original_tag = USA
			}
			add_opinion_modifier = {
				modifier = AA_pacific_do
				target = ENG
			}
		}
		IF = {
			limit = {
				original_tag = AST
			}
			add_opinion_modifier = {
				modifier = AA_pacific_do
				target = ENG
			}
			ENG = {
				add_opinion_modifier = {
					modifier = AA_pacific_do
					target = AST
				}	
			}
			add_opinion_modifier = {
				modifier = AA_pacific_do
				target = USA
			}
			USA = {
				add_opinion_modifier = {
					modifier = AA_pacific_do
					target = AST
				}	
			}
		}
		IF = {
			limit = {
				original_tag = NZL
			}
			add_opinion_modifier = {
				modifier = AA_pacific_do
				target = ENG
			}
			ENG = {
				add_opinion_modifier = {
					modifier = AA_pacific_do
					target = NZL
				}	
			}
			add_opinion_modifier = {
				modifier = AA_pacific_do
				target = USA
			}
			USA = {
				add_opinion_modifier = {
					modifier = AA_pacific_do
					target = NZL
				}	
			}
		}
	}
}

country_event = {
	id = anam.12
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.12"}
	title = "Organisation Issues Over"
	desc = "After several months of problems concering the cooperation between the British and American militaries and the complex systems both operate under, we have finally resolved the last of the issues leading to greater benefits for both of our nations."
	picture = report_event_generic_conference
	
	is_triggered_only = yes
	
	fire_only_once = no
	
	option = {
		name = "Excellent"
		IF = {
			limit = {
				original_tag = ENG
			}
			swap_ideas = { remove_idea = AA_mil_coop1 add_idea = AA_mil_coop2 }
		}
		IF = {
			limit = {
				original_tag = USA
			}
			swap_ideas = { remove_idea = AA_mil_coop1 add_idea = AA_mil_coop2 }
		}
	}
}

country_event = {
	id = anam.13
	immediate = {log = "[GetDateText]: [Root.GetName]: event anam.13"}
	title = "The North Atlantic Treaty Organisation"
	desc = anam.13.d
	picture = report_event_generic_conference
	
	is_triggered_only = yes
	
	fire_only_once = no
	
	option = {
		name = "Together for prosperity, liberty and equality."
		IF = {
			limit = {
				original_tag = ENG
				NOT = { has_country_flag = nato_created }
			}
			dismantle_faction = yes
			USA = { 
				dismantle_faction = yes
			}
			create_faction = nato
			every_country = {
				limit = {
					OR = {
						has_country_flag = usaally
						has_country_flag = engally
					}
				}
				ENG = { add_to_faction = PREV }
			}
			USA = { country_event = { id = anam.13 hours = 1 } }
		}
		IF = {
			limit = {
				original_tag = USA
				NOT = { has_country_flag = nato_created }
			}
			dismantle_faction = yes
			ENG = { 
				dismantle_faction = yes
			}
			create_faction = nato
			every_country = {
				limit = {
					OR = {
						has_country_flag = usaally
						has_country_flag = engally
					}
				}
				USA = { add_to_faction = PREV }
			}
			ENG = { country_event = { id = anam.13 hours = 1 } }
		}
		hidden_effect = {
			ENG = { set_country_flag = nato_created }
			USA = { set_country_flag = nato_created }
		}
	}
}
