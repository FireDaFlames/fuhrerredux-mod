# Japanese Shogunate Events
# Contributed by Kaiczer

add_namespace = jap_shogun

country_event = { #Response the Japanese Martial Law
	id = jap_shogun.1
	title = jap_shogun.1.t
	desc = jap_shogun.1.d 
	
	trigger = {
		tag = JAP 
		has_completed_focus = jap_allow_marshall_law
	}
	mean_time_to_happen = { days = 7 }
	fire_only_once = yes 
	
	option = {
		name = jap_shogun.1.a 
		add_stability = -0.02
		country_event = {
			id = jap_shogun.2
			days = 30 
		}
	}
}
country_event = { #Resignation of Prince Fumimaro
	id = jap_shogun.2
	title = jap_shogun.2.t
	desc = jap_shogun.2.d 
	
	is_triggered_only = yes 
	
	option = {
		name = jap_shogun.2.a 
		custom_effect_tooltip = "Prince Iesato's been reappointed the president"
		add_popularity = {
			ideology = authoritarian_democrat 
			popularity = 0.05
		}
		hidden_effect = {
			country_event = {
				id = jap_shogun.3
				days = 20
			}
		}
	}
	option = {
		name = jap_shogun.2.b
		custom_effect_tooltip = "Prince Kuniyuki's been appointed the president"
		add_popularity = {
			ideology = paternal_autocrat 
			popularity = 0.05
		}
		hidden_effect = {
			country_event = {
				id = jap_shogun.3
				days = 20
			}
		}
	}
}
country_event = { #Preparation of Anti-Militarist 
	id = jap_shogun.3
	title = jap_shogun.3.t 
	desc = jap_shogun.3.d 
	
	is_triggered_only = yes 
	
	option = {
		name = jap_shogun.3.a 
		add_popularity = {
			ideology = authoritarian_democrat 
			popularity = 0.03 
		}
		add_stability = -0.05
	}
}
#####################
#Constitution Crisis#
#####################
country_event = { #Lord President / Tairo vs. Prime Minister 
	id = jap_shogun.4
	title = jap_shogun.4.t 
	desc = jap_shogun.4.d 
	
	trigger = {
		tag = JAP 
		OR = {
			has_completed_focus = jap_the_admiral_plot
			has_completed_focus = jap_the_army_coup
		}
	}
	mean_time_to_happen = { days = 3 }
	fire_only_once = yes 
	
	option = {
		name = jap_shogun.4.a 
		add_popularity = {
			ideology = authoritarian_democrat 
			popularity = 0.05
		}
		hidden_effect = {
			country_event = {
				id = jap_shogun.5
				days = 70 
			}
		}
	}
}
#######Army Coup IRAA#######
country_event = { #Korean Righteous Army / Taiwanese Anarchy / Recalling Governor-Generals
#Army - Jap.11 > Jap.13 > Jappol.6
#Navy - Jap.12 > Jappol.1 > Jappol.2/3 
	id = jap_shogun.5
	title = jap_shogun.5.t 
	desc = jap_shogun.5.d 
	
	is_triggered_only = yes 
	
	option = {
		name = jap_shogun.5.a 
		add_political_power = -300
		add_stability = -0.3
		custom_effect_tooltip = "Our empire shall reach her demise by our own hand"
		hidden_effect = {
			every_controlled_state = {
				limit = {
					OR = {
						NOT = { is_core_of = JAP }
						is_core_of = KOR 
						is_core_of = CHI 
						is_core_of = INS  
					}
				}
				set_demilitarized_zone = yes 
			}
			every_owned_state = {
				limit = {
					is_core_of = JAP 
					NOT = {
						state = 282
					}
				}
				set_demilitarized_zone = yes 
			}
		}
	}
}
country_event = { #Prince Iesato Prowoke the War 
	id = jap_shogun.6
	title = jap_shogun.6.t 
	desc = jap_shogun.6.d 
	
	trigger = {
		tag = JAP 
		AND = {
			has_completed_focus = jap_the_army_coup
			has_completed_focus = jap_ally_the_military
		} 
	}
	mean_time_to_happen = { days = 3 }
	fire_only_once = yes  
	
	option = {
		name = "Time to kick those Militarists buttocks" 
		set_country_flag = JAP_shogunate_focus_unlock
		set_cosmetic_tag = JAP_Shogunate 
		set_politics = {
			ruling_party = authoritarian_democrat
			elections_allowed = no
		}
		add_country_leader_role = {
			character = JAP_Tokugawa_Iesato
			promote_leader = yes
			country_leader = {
				ideology = authoritarian_democrat_subtype
				expire = "1965.1.1.1"
				traits = {  }
			}
		}
		add_country_leader_role = {
			character = JAP_Tokugawa_Kuniyuki
			promote_leader = yes
			country_leader = {
				ideology = paternal_autocrat_subtype
				expire = "1965.1.1.1"
				traits = {  }
			}
		}
		add_country_leader_role = {
			character = JAP_Nakano_Seigo
			promote_leader = yes
			country_leader = {
				ideology = national_populist_subtype
				expire = "1965.1.1.1"
				traits = {  }
			}
		}
		hidden_effect = {
			create_country_leader = {
				name = "Tokugawa Iesato"
				picture = "gfx/leaders/JAP/Portrait_JAP_Tokugawa_Iesato.png"
				ideology = social_conservative_subtype
				expire = "1965.1.1.1"
			}
			create_country_leader = {
				name = "Tokugawa Iesato"
				picture = "gfx/leaders/JAP/Portrait_JAP_Tokugawa_Iesato.png"
				ideology = social_liberal_subtype
				expire = "1965.1.1.1"
			}
			create_country_leader = {
				name = "Tokugawa Iesato"
				picture = "gfx/leaders/JAP/Portrait_JAP_Tokugawa_Iesato.png"
				ideology = market_liberal_subtype
				expire = "1965.1.1.1"
			}
			create_country_leader = {
				name = "Tokugawa Iesato"
				picture = "gfx/leaders/JAP/Portrait_JAP_Tokugawa_Iesato.png"
				ideology = social_democrat_subtype
				expire = "1965.1.1.1"
			}
			set_party_name = { 
				ideology = authoritarian_democrat 
				long_name = JAP_authoritarian_democrat_party_shogun_long 
				name = JAP_authoritarian_democrat_party_shogun 
			}
			set_party_name = { 
				ideology = paternal_autocrat 
				long_name = JAP_paternal_autocrat_party_shogun_long 
				name = JAP_paternal_autocrat_party_shogun 
			}
			set_party_name = { 
				ideology = national_populist 
				long_name = JAP_national_populist_party_long_shogun 
				name = JAP_national_populist_party_shogun 
			}
			every_controlled_state = {
				set_demilitarized_zone = no 
			}
			release = KOR 
			CHI = { transfer_state = 524 }
			ZHI = { transfer_state = 869 }
			FNG = { transfer_state = 793 }
			BEA = { transfer_state = 673 }
			AST = { transfer_state = 668 }
		}
		JAP_setup_civil_war = yes 
		hidden_effect = {
			load_focus_tree = FX_Japan_Shogunate
			#mark_focus_tree_layout_dirty = yes 
		}
	}
}
#######Navy Coup IRAA#######
country_event = { #Prince Kuniyuki and Admiral
	id = jap_shogun.7
	title = jap_shogun.7.t 
	desc = jap_shogun.7.d 
	
	trigger = {
		tag = JAP 
		AND = {
			has_completed_focus = jap_the_navy_plot
			has_completed_focus = jap_ally_the_military
		} 
	}
	mean_time_to_happen = { days = 3 }
	fire_only_once = yes 
	
	option = {
		name = jap_shogun.7.a 
		country_event = {
			id = jap_shogun.8
			days = 7 
		}
	}
}
country_event = { #National Government of Royalist Front
	id = jap_shogun.8
	title = jap_shogun.8.t 
	desc = jap_shogun.8.d 
	
	is_triggered_only = yes 
	
	option = {
		name = jap_shogun.8.a 
		#JAP_set_national_government_cabinet = yes 
	}
	option = {
		name = jap_shogun.8.b 
		hidden_effect = {
			country_event = {
				id = jap_shogun.9
				days = 30 
			}
		}
	}
}

country_event = { #Counter Coup 
	id = jap_shogun.9
	title = jap_shogun.9.t 
	desc = jap_shogun.9.d 
	
	is_triggered_only = yes 
	
	option = { #Tokugawa Rises
		name = jap_shogun.9.a 
		load_focus_tree = FX_Japan_Shogunate
		set_country_flag = JAP_shogunate_focus_unlock
		set_country_flag = JAP_counter_coup_win
		JAP = {
			set_cosmetic_tag = JAP_Shogunate 
			set_politics = {
				ruling_party = authoritarian_democrat
				elections_allowed = no
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.4
			}
			set_party_name = { 
				ideology = authoritarian_democrat 
				long_name = JAP_authoritarian_democrat_party_shogun_long 
				name = JAP_authoritarian_democrat_party_shogun 
			}
			set_party_name = { 
				ideology = paternal_autocrat 
				long_name = JAP_paternal_autocrat_party_shogun_long 
				name = JAP_paternal_autocrat_party_shogun 
			}
			set_party_name = { 
				ideology = national_populist 
				long_name = JAP_national_populist_party_long_shogun 
				name = JAP_national_populist_party_shogun 
			}
			hidden_effect = {
				load_focus_tree = FX_Japan_Shogunate
				mark_focus_tree_layout_dirty = yes 
			}
		}
	}
}