add_namespace = arabia

country_event = { # Intro Event
  id = arabia.0
  title = arabia.0.t
  desc = arabia.0.d
  picture = GFX_report_event_ARB_troops
  is_triggered_only = yes

  option = { # 
    name = arabia.0.a
  }
}

country_event = { # Ikhwan Raid
  id = arabia.1
  title = arabia.1.t
  desc = arabia.1.d
  picture = GFX_report_event_ARB_troops

  trigger = {
    tag = ARB
    country_exists = ARB
    has_idea = ARB_ikhwan_raids
    NOT = { has_war_with = SAU }
  }

  mean_time_to_happen = {
    days = 120
    modifier = {
      factor = 0.75
      check_variable = {
        var = british_control
        value = 50
        compare = greater_than_or_equals
      }
    }
    modifier = {
      factor = 2
      NOT = { controls_state = 1032 }
    }
    modifier = {
      factor = 2
      NOT = { controls_state = 292 }
    }
  }

  option = { # After them!
    name = arabia.1.a
    add_political_power = -5
    add_manpower = -1
  }

  option = { # We'll need make it
    name = arabia.1.b
    add_political_power = -10
  }
}

country_event = { # Hejazi Attack on Nejd
  id = arabia.2
  title = arabia.2.t
  desc = arabia.2.d
  picture = GFX_report_event_ARB_troops
  
  trigger = {
    tag = ARB
    country_exists = ARB
    has_idea = ARB_ikhwan_raids
    NOT = { has_war_with = SAU }
  }

  mean_time_to_happen = {
    days = 130
    modifier = {
      factor = 0.65
      check_variable = {
        var = british_control
        value = 50
        compare = greater_than_or_equals
      }
    }
    modifier = {
      factor = 2
      NOT = { controls_state = 1032 }
    }
    modifier = {
      factor = 2
      NOT = { controls_state = 292 }
    }
  }

  option = { # And don't come back!
    name = arabia.2.a
    add_political_power = 20
  }
}

country_event = { # British Archeologists Arrives
  id = arabia.3
  title = arabia.3.t
  desc = arabia.3.d
  is_triggered_only = yes

  option = { # I hope they find something!
    name = arabia.3.a
    hidden_effect = {
      random_list = {
        40 = { # They are killed by the Ikhwan
          country_event = { id = arabia.4 days = 40 }
        }
        60 = { # They found something
          country_event = { id = arabia.8 days = 60 }
        }
      }
    }
  }
}

country_event = { # Prospectors Reported Missing
  id = arabia.4
  title = arabia.4.t
  desc = arabia.4.d
  picture = GFX_report_event_physics_lab_01
  is_triggered_only = yes

  option = {
    name = arabia.4.a
    hidden_effect = {
      country_event = { id = arabia.5 days = 30 }
    }
  }
}

country_event = { # A Tragedy in Al-Hasa
  id = arabia.5
  title = arabia.5.t
  desc = arabia.5.d
  picture = GFX_report_event_ARB_troops
  is_triggered_only = yes

  option = {
    name = arabia.5.a
    ENG = {
      country_event = { id = arabia.6 days = 3 }
    }
  }
}

country_event = { # British Prospectors Found Dead in Al-Hasa!
  id = arabia.6
  title = arabia.6.t
  desc = arabia.6.d
  picture = GFX_report_event_ARB_troops
  is_triggered_only = yes

  option = {
    name = arabia.6.a
    ARB = {
      country_event = { id = arabia.9 days = 2 }
    }
  }

  option = {
    name = arabia.6.b
    ARB = {
      country_event = { id = arabia.7 days = 2 }
    }
  }
}

country_event = { # RAF Conducts an Air Strike
  id = arabia.7
  title = arabia.7.t
  desc = arabia.7.d
  picture = GFX_report_event_ace_promoted
  is_triggered_only = yes

  option = {
    name = arabia.7.a
    add_political_power = 10
  }
}

country_event = { # Oil Found!
  id = arabia.8
  title = arabia.8.t
  desc = arabia.8.d
  picture = GFX_report_event_physics_lab_02
  is_triggered_only = yes

  option = {
    name = arabia.8.a
    744 = {
      add_resource = {
        type = oil
        amount = 8
      }
    }
  }
}

country_event = { # British Demands an Apology
  id = arabia.9
  title = arabia.9.t
  desc = arabia.9.d
  picture = GFX_report_event_chamberlain
  is_triggered_only = yes

  option = { # Yeah sure why not
    name = arabia.9.a
    ENG = {
      country_event = { id = arabia.10 days = 2 }
    }
  }
}

country_event = { # Hashemite Government Issues an Apology
  id = arabia.10
  title = arabia.10.t
  desc = arabia.10.d
  picture = GFX_report_event_generic_sign_treaty2
  is_triggered_only = yes

  option = {
    name = arabia.10.a
    add_political_power = 10
  }
}

country_event = { # Black Wednesday Hits
  id = arabia.11
  title = arabia.11.t
  desc = arabia.11.d
  picture = GFX_report_event_generic_sign_treaty2
  is_triggered_only = yes

  option = {
    name = arabia.11.a
    add_political_power = -100
    add_ideas = ARB_black_wednesday
    
    ENG = {
      diplomatic_relation = {
        country = ARB
        relation = non_aggression_pact
        active = no
      }
      diplomatic_relation = {
        country = ARB
        relation = guarantee
        active = no
      }
      diplomatic_relation = {
        country = ARB
        relation = military_access
        active = no
      }
    }
  }
}

country_event = { # Whispers from Najd
  id = arabia.12
  title = arabia.12.t
  desc = arabia.12.d
  picture = GFX_report_event_ARB_camels
  is_triggered_only = yes

  option = { # May Allah help us in this coming storm
    name = arabia.12.a
    set_country_flag = ARB_revolt
    set_country_flag = ARB_revolt_trigger
    activate_mission_tooltip = ARB_saudi_revolt
    hidden_effect = {
      744 = { set_demilitarized_zone = yes }
      292 = { set_demilitarized_zone = yes }
      1032 = { set_demilitarized_zone = yes }
      678 = { set_demilitarized_zone = yes }
      945 = { set_demilitarized_zone = yes }
      946 = { set_demilitarized_zone = yes }
    }
  }
}

country_event = { # Nejd Revolts!
  id = arabia.13
  title = arabia.13.t
  desc = arabia.13.d
  picture = GFX_report_event_SAU_ibn_saud
  is_triggered_only = yes

  immediate = {
    hidden_effect = {
      744 = { set_demilitarized_zone = no }
      292 = { set_demilitarized_zone = no }
      1032 = { set_demilitarized_zone = no }
      678 = { set_demilitarized_zone = no }
      SAU = {
        add_state_core = 744
        add_state_core = 292
        add_state_core = 1032
        add_state_core = 678
        transfer_state = 744
        transfer_state = 292
        transfer_state = 1032
        transfer_state = 678
        load_oob = "SAU"
      }
      ARB = {
        remove_state_core = 744
        remove_state_core = 292
        remove_state_core = 1032
        remove_state_core = 678
        add_state_claim = 744
        add_state_claim = 292
        add_state_claim = 1032
        add_state_claim = 678

        set_province_controller = 8004
        set_province_controller = 10892
        set_province_controller = 8060

        declare_war_on = {
          target = SAU
          type = annex_everything
        }
      }
    }
  }

  option = { # Death to the traitors!
    name = arabia.13.a
    hidden_effect = {
      country_event = { id = arabia.14 days = 2 }
    }
  }

  option = { # Play as Saudis
    name = arabia.13.b
    trigger = { is_ai = no }
    SAU = {
      change_tag_from = ROOT
    }
  }
}

country_event = { # Rashidi
  id = arabia.14
  title = arabia.14.t
  desc = arabia.14.d
  picture = GFX_report_event_JBS_Horses
  is_triggered_only = yes

  immediate = {
    hidden_effect = {
      945 = { set_demilitarized_zone = no }
      946 = { set_demilitarized_zone = no }
      RAS = {
        add_state_core = 945
        add_state_core = 946
        transfer_state = 945
        transfer_state = 946
        load_oob = "RAS"
      }
      ARB = {
        remove_state_core = 945
        remove_state_core = 946
        add_state_claim = 945
        add_state_claim = 946
        declare_war_on = {
          target = RAS
          type = annex_everything
        }
      }
      SAU = {
        declare_war_on = {
          target = RAS
          type = annex_everything
        }
      }
    }
  }

  option = {
    name = arabia.14.a
  }
}

country_event = { # Appeal for British Support
  id = arabia.15
  title = arabia.15.t
  desc = arabia.15.d
  picture = GFX_report_event_chamberlain
  is_triggered_only = yes

  option = { # Send them as they need
    name = arabia.15.a
    ai_chance = {
      base = 80
      modifier = {
        factor = 2
        ARB = {
          has_completed_focus = ARB_london_economic_assistance
        }
      }
      modifier = {
        factor = 2
        ARB = {
          has_completed_focus = ARB_british_crisis_response
        }
      }
      modifier = {
        factor = 2
        ARB = {
          has_completed_focus = ARB_deals_with_english_electric
        }
      }
      modifier = {
        factor = 0.4
        has_idea = ENG_bw
      }
    }
    send_equipment = {
      equipment = infantry_equipment
      amount = 2000
      target = ARB
    }
    send_equipment = {
      equipment = support_equipment
      amount = 500
      target = ARB
    }
    send_equipment = {
      equipment = motorized_equipment
      amount = 50
      target = ARB
    }
    ARB = {
      country_event = { id = arabia.16 days = 1 }
    }
  }

  option = { # Send them limited support
    name = arabia.15.b
    ai_chance = {
      base = 80
      modifier = {
        factor = 2
        ARB = {
          has_completed_focus = ARB_london_economic_assistance
        }
      }
      modifier = {
        factor = 2
        ARB = {
          has_completed_focus = ARB_british_crisis_response
        }
      }
      modifier = {
        factor = 2
        ARB = {
          has_completed_focus = ARB_deals_with_english_electric
        }
      }
    }
    send_equipment = {
      equipment = infantry_equipment
      amount = 1000
      target = ARB
    }
    ARB = {
      country_event = { id = arabia.17 days = 1 }
    }
  }

  option = { # We cannot spare anything
    name = arabia.15.c
    ai_chance = {
      base = 80
      modifier = {
        factor = 2
        ARB = {
          has_completed_focus = ARB_expand_trading_partners
        }
      }
      modifier = {
        factor = 2
        ARB = {
          has_completed_focus = ARB_request_german_support
        }
      }
    }
    ARB = {
      country_event = { id = arabia.18 days = 1 }
    }
  }
}

country_event = { # British Support
  id = arabia.16
  title = arabia.16.t
  desc = arabia.16.d
  picture = GFX_report_event_chamberlain
  is_triggered_only = yes

  option = {
    name = arabia.16.a
    set_temp_variable = { british_control_temp = 10 }
    ARB_increase_british_control = yes
    set_country_flag = ARB_generous_support
  }
}

country_event = { # Limited British Support
  id = arabia.17
  title = arabia.17.t
  desc = arabia.17.d
  picture = GFX_report_event_chamberlain
  is_triggered_only = yes

  option = {
    name = arabia.17.a
    set_temp_variable = { british_control_temp = 5 }
    ARB_increase_british_control = yes
    set_country_flag = ARB_limited_support
  }
}

country_event = { # No British Support
  id = arabia.18
  title = arabia.18.t
  desc = arabia.18.d
  picture = GFX_report_event_generic_sign_treaty2
  is_triggered_only = yes

  option = {
    name = arabia.18.a
    set_temp_variable = { british_control_temp = 10 }
    ARB_decrease_british_control = yes
    set_country_flag = ARB_no_support
  }
}

country_event = { # Annexation of Najd/Rashidi
  id = arabia.19
  title = arabia.19.t
  desc = arabia.19.d
  picture = GFX_report_event_ARB_troops
  is_triggered_only = yes

  option = { # 
    name = arabia.19.a
    add_political_power = 50
    if = {
      limit = {
        NOT = { country_exists = SAU }
        NOT = { country_exists = RAS }
      }
      set_country_flag = ARB_civil_war_end
    }
  }
}

country_event = { # Hajj
  id = arabia.20
  title = arabia.20.t
  desc = arabia.20.d
  picture = GFX_report_event_ARB_troops
  is_triggered_only = yes

  option = {
    name = arabia.20.a
  }
}

country_event = { # Question of Reforms
  id = arabia.21
  title = arabia.21.t
  desc = arabia.21.d
  picture = GFX_report_event_JBS_Horses
  is_triggered_only = yes

  option = { # The King must rule!
    name = arabia.21.a
    add_political_power = -50
  }

  option = { # Adopting the British style of monarchy guarantees survival
    name = arabia.21.b
    hidden_effect = {
      decrease_ruling_party_popularity_by_20 = yes
    }
    set_politics = {
      ruling_party = authoritarian_democrat
      elections_allowed = no
    }
    increase_ruling_party_popularity_by_20 = yes
    swap_ideas = {
      remove_idea = absolute_monarchy
      add_idea = constitutional_monarchy
    }
    set_temp_variable = { british_control_temp = 5 }
    ARB_increase_british_control = yes
  }
}