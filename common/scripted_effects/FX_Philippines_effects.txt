PHI_add_american_naval_tech = {
  if = {
    limit = { NOT = { has_dlc = "Man the Guns" } }
    set_technology = {
      early_submarine = 1
      early_destroyer = 1
      early_light_cruiser = 1
      early_heavy_cruiser = 1
      transport = 1
    }
  }

  if = {
    limit = { has_dlc = "Man the Guns" }
    set_technology = {
      basic_naval_mines = 1
      submarine_mine_laying = 1
      basic_battery = 1
      early_ship_hull_cruiser = 1
      early_ship_hull_light = 1
      early_ship_hull_submarine = 1
      basic_ship_hull_submarine = 1
      basic_torpedo = 1
      mtg_transport = 1
    }
  }
}

PHI_add_american_naval_variants = {
  if = {
    limit = { has_dlc = "Man the Guns" }
    custom_effect_tooltip = PHI_light_cruiser_variant_available_tt
    custom_effect_tooltip = PHI_destroyer_variant_available_tt
    custom_effect_tooltip = PHI_submarine_variant_available_tt
    hidden_effect = {
      create_equipment_variant = {
        name = "Clemson Class"
        type = ship_hull_light_1
        name_group = PHI_DD_HISTORICAL
        parent_version = 0
        modules = {
          fixed_ship_battery_slot = ship_light_battery_2
          fixed_ship_anti_air_slot = ship_anti_air_1
          fixed_ship_fire_control_system_slot = ship_fire_control_system_1
          fixed_ship_radar_slot = empty
          fixed_ship_engine_slot = light_ship_engine_1
          fixed_ship_torpedo_slot = empty
          mid_1_custom_slot = empty
          rear_1_custom_slot = empty
        }
      }
      create_equipment_variant = {
        name = "Omaha Class"
        type = ship_hull_cruiser_1
        name_group = PHI_CL_HISTORICAL
        parent_version = 0
        modules = {
          fixed_ship_battery_slot = ship_light_medium_battery_1
          fixed_ship_anti_air_slot = ship_anti_air_1
          fixed_ship_fire_control_system_slot = ship_fire_control_system_0
          fixed_ship_radar_slot = empty
          fixed_ship_engine_slot = cruiser_ship_engine_1
          fixed_ship_armor_slot = ship_armor_cruiser_1
          mid_1_custom_slot = ship_torpedo_1
          mid_2_custom_slot = ship_torpedo_1
          rear_1_custom_slot = ship_light_medium_battery_1
        }
      }
      create_equipment_variant = {
        name = "Barracuda Class"
        type = ship_hull_submarine_2
        name_group = PHI_SS_HISTORICAL
        parent_version = 0
        modules = {
          fixed_ship_torpedo_slot = ship_torpedo_sub_1
          fixed_ship_engine_slot = sub_ship_engine_1
          rear_1_custom_slot = empty
        }
      }
      create_equipment_variant = {
        name = "S Class"
        type = ship_hull_submarine_1
        name_group = PHI_SS_HISTORICAL
        parent_version = 0
        modules = {
          fixed_ship_torpedo_slot = ship_torpedo_sub_1
          fixed_ship_engine_slot = sub_ship_engine_2
          rear_1_custom_slot = empty
        }
        obsolete = yes
      }
    }
  }

  if = {
    limit = { NOT = { has_dlc = "Man the Guns" } }
    custom_effect_tooltip = PHI_heavy_cruiser_variant_available_tt
    custom_effect_tooltip = PHI_destroyer_variant_available_tt
    custom_effect_tooltip = PHI_submarine_variant_available_tt
    hidden_effect = {
      # Heavy Cruisers #
      create_equipment_variant = {
        name = "Portland Class"
        type = heavy_cruiser_1
        parent_version = 0
        upgrades = {
          ship_reliability_upgrade = 2
          ship_engine_upgrade = 3
          ship_armor_upgrade = 3
          ship_gun_upgrade = 3
        }
      }
      create_equipment_variant = {
        name = "Barracuda Class"
        type = submarine_1
        parent_version = 1
        upgrades = {
          ship_reliability_upgrade = 2
          sub_engine_upgrade = 2
          sub_stealth_upgrade = 2
          sub_torpedo_upgrade = 2
        }
      }
      create_equipment_variant = {
        name = "Clemson Class"
        type = destroyer_1
        parent_version = 0
        upgrades = {
          ship_torpedo_upgrade = 1
          destroyer_engine_upgrade = 3
          ship_ASW_upgrade = 2
          ship_anti_air_upgrade = 1
        }
      }
    }
  }
}

PHI_deploy_refubished_ships = {
  if = {
    limit = { has_dlc = "Man the Guns" }
    custom_effect_tooltip = PHI_deploy_refubished_ships_mtg_tt
    hidden_effect = {
      add_equipment_production = {
        equipment = {
          type = ship_hull_cruiser_1
          creator = "PHI"
          version_name = "Omaha Class"
        }
        name = "BRP Rizal" 
        requested_factories = 1
        progress = 0.90
        amount = 1
      }
      add_equipment_production = {
        equipment = {
          type = ship_hull_light_1
          creator = "PHI"
          version_name = "Clemson Class"
        }
        name = "BRP Kalayaan" 
        requested_factories = 1
        progress = 0.90
        amount = 1
      }
      add_equipment_production = {
        equipment = {
          type = ship_hull_light_1
          creator = "PHI"
          version_name = "Clemson Class"
        }
        name = "BRP Matapang" 
        requested_factories = 1
        progress = 0.90
        amount = 1
      }
      add_equipment_production = {
        equipment = {
          type = ship_hull_submarine_2
          creator = "PHI"
          version_name = "Barracuda Class"
        }
        name = "BRP San Lorenzo" 
        requested_factories = 1
        progress = 0.90
        amount = 1
      }
      add_equipment_production = {
        equipment = {
          type = ship_hull_submarine_2
          creator = "PHI"
          version_name = "Barracuda Class"
        }
        name = "BRP Matapang" 
        requested_factories = 1
        progress = 0.90
        amount = 1
      }
      add_equipment_production = {
        equipment = {
          type = ship_hull_submarine_2
          creator = "PHI"
          version_name = "Barracuda Class"
        }
        name = "BRP Kalayaan" 
        requested_factories = 1
        progress = 0.90
        amount = 1
      }
      add_equipment_production = {
        equipment = {
          type = ship_hull_submarine_2
          creator = "PHI"
          version_name = "Barracuda Class"
        }
        name = "BRP Matapang" 
        requested_factories = 1
        progress = 0.90
        amount = 1
      }
    }
    else = { 
      custom_effect_tooltip = PHI_deploy_refubished_ships_no_mtg_tt
      hidden_effect = {
        add_equipment_production = {
          equipment = {
            type = ship_hull_cruiser_1
            creator = "PHI"
            version_name = "Omaha Class"
          }
          name = "BRP Rizal" 
          requested_factories = 1
          progress = 0.90
          amount = 1
        }
        add_equipment_production = {
          equipment = {
            type = ship_hull_cruiser_1
            creator = "PHI"
            version_name = "Omaha Class"
          }
          name = "BRP Bonifacio" 
          requested_factories = 1
          progress = 0.90
          amount = 1
        }
        add_equipment_production = {
          equipment = {
            type = destroyer_1
            creator = "PHI"
            version_name = "Clemson Class"
          }
          name = "BRP Kalayaan" 
          requested_factories = 1
          progress = 0.90
          amount = 1
        }
        add_equipment_production = {
          equipment = {
            type = destroyer_1
            creator = "PHI"
            version_name = "Clemson Class"
          }
          name = "BRP Matapang" 
          requested_factories = 1
          progress = 0.90
          amount = 1
        }
        add_equipment_production = {
          equipment = {
            type = submarine_1
            creator = "PHI"
            version_name = "Barracuda Class"
          }
          name = "BRP San Lorenzo" 
          requested_factories = 1
          progress = 0.90
          amount = 1
        }
        add_equipment_production = {
          equipment = {
            type = submarine_1
            creator = "PHI"
            version_name = "Barracuda Class"
          }
          name = "BRP Matapang" 
          requested_factories = 1
          progress = 0.90
          amount = 1
        }
        add_equipment_production = {
          equipment = {
            type = submarine_1
            creator = "PHI"
            version_name = "Barracuda Class"
          }
          name = "BRP Kalayaan" 
          requested_factories = 1
          progress = 0.90
          amount = 1
        }
        add_equipment_production = {
          equipment = {
            type = submarine_1
            creator = "PHI"
            version_name = "Barracuda Class"
          }
          name = "BRP Matapang" 
          requested_factories = 1
          progress = 0.90
          amount = 1
        }
      }
    }
  }
}