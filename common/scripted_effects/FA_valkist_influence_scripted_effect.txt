SIA_calculate_valkist_influence = {
	hidden_effect = {
		set_variable = { valkist_influence_pop = SIA.party_popularity@valkist }
		if = {
			limit = {
				check_variable = {
					var = valkist_influence_pop
					value = 0.48
					compare = less_than
				}
			}
			if = {
				limit = {
					check_variable = {
						var = valkist_influence_pop
						value = 0.35
						compare = less_than
					}
				}
				if = {
					limit = {
						check_variable = {
							var = valkist_influence_pop
							value = 0.299
							compare = greater_than
						}
					}
					set_variable = { SIA_valkist_level = 5 }
				}
				else_if = {
					limit = {
						check_variable = {
							var = valkist_influence_pop
							value = 0.249
							compare = greater_than
						}
					}
					set_variable = { SIA_valkist_level = 4 }
				}
				else_if = {
					limit = {
						check_variable = {
							var = valkist_influence_pop
							value = 0.199
							compare = greater_than
						}
					}
					set_variable = { SIA_valkist_level = 3 }
				}
				else_if = {
					limit = {
						check_variable = {
							var = valkist_influence_pop
							value = 0.149
							compare = greater_than
						}
					}
					set_variable = { SIA_valkist_level = 2 }
				}
				else_if = {
					limit = {
						check_variable = {
							var = valkist_influence_pop
							value = 0.049
							compare = greater_than
						}
					}
					set_variable = { SIA_valkist_level = 1 }
				}
				else_if = {
					limit = {
						always = yes
					}
					set_variable = { SIA_valkist_level = 0 }
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = valkist_influence_pop
						value = 0.42
						compare = less_than
					}
				}
				if = {
					limit = {
						check_variable = {
							var = valkist_influence_pop
							value = 0.39
							compare = less_than
						}
					}
					set_variable = { SIA_valkist_level = 6 }
				}
				else_if = {
					limit = {
						always = yes
					}
					set_variable = { SIA_valkist_level = 7 }
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = valkist_influence_pop
						value = 0.45
						compare = less_than
					}
				}
				set_variable = { SIA_valkist_level = 8 }
			}
			else_if = {
				limit = {
					always = yes
				}
				set_variable = { SIA_valkist_level = 9 }
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = valkist_influence_pop
					value = 0.5
					compare = less_than
				}
			}
			set_variable = { SIA_valkist_level = 10 }
		}
		else_if = {
			limit = {
				check_variable = {
					var = valkist_influence_pop
					value = 0.6
					compare = less_than
				}
			}
			set_variable = { SIA_valkist_level = 11 }
		}
		else_if = {
			limit = {
				always = yes
			}
			set_variable = { SIA_valkist_level = 12 }
		}
	}
}
SIA_add_valkist_idea = {
	hidden_effect = {
		if = {
			limit = {
				check_variable = {
					var = SIA_valkist_level
					value = 10
					compare = less_than
				}
			}
			if = {
				limit = {
					check_variable = {
						var = SIA_valkist_level
						value = 5
						compare = less_than
					}
				}
				if = {
					limit = {
						check_variable = {
							var = SIA_valkist_level
							value = 4
							compare = equals
						}
					}
					add_ideas = Valkist_influence_in_Siam2
				}
				else_if = {
					limit = {
						check_variable = {
							var = SIA_valkist_level
							value = 3
							compare = equals
						}
					}
					add_ideas = Valkist_influence_in_Siam1
				}
				else_if = {
					limit = {
						check_variable = {
							var = SIA_valkist_level
							value = 2
							compare = equals
						}
					}
					add_ideas = Valkist_influence_in_Siam1

				}
				else_if = {
					limit = {
						check_variable = {
							var = SIA_valkist_level
							value = 1
							compare = equals
						}
					}
					add_ideas = Valkist_influence_in_Siam
				}
				else_if = {
					limit = {
						always = yes
					}
					add_ideas = Valkist_influence_in_Siam
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = SIA_valkist_level
						value = 8
						compare = less_than
					}
				}
				if = {
					limit = {
						check_variable = {
							var = SIA_valkist_level
							value = 5
							compare = equals
						}
					}
					add_ideas = Valkist_influence_in_Siam2
				}
				else_if = {
					limit = {
						check_variable = {
							var = SIA_valkist_level
							value = 6
							compare = equals
						}
					}
					add_ideas = Valkist_influence_in_Siam3
				}
				else_if = {
					limit = {
						always = yes
					}
					add_ideas = Valkist_influence_in_Siam3
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = SIA_valkist_level
						value = 8
						compare = equals
					}
				}
				add_ideas = Valkist_influence_in_Siam4
			}
			else_if = {
				limit = {
					always = yes
				}
				add_ideas = Valkist_influence_in_Siam4
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = SIA_valkist_level
					value = 10
					compare = equals
				}
			}
			add_ideas = Valkist_influence_in_Siam5
		}
		else_if = {
			limit = {
				check_variable = {
					var = SIA_valkist_level
					value = 11
					compare = equals
				}
			}
			add_ideas = Valkist_influence_in_Siam5
		}
		else_if = {
			limit = {
				always = yes
			}
			add_ideas = Valkist_influence_in_Siam6
		}
	}
}
SIA_remove_valkist_idea = {
	hidden_effect = {
		if = {
			limit = {
				has_idea = Valkist_influence_in_Siam1
			}
			remove_ideas = Valkist_influence_in_Siam1
		}
		else_if = {
			limit = {
				has_idea = Valkist_influence_in_Siam2
			}
			remove_ideas = Valkist_influence_in_Siam2
		}
		else_if = {
			limit = {
				has_idea = Valkist_influence_in_Siam3
			}
			remove_ideas = Valkist_influence_in_Siam3
		}
		else_if = {
			limit = {
				has_idea = Valkist_influence_in_Siam4
			}
			remove_ideas = Valkist_influence_in_Siam4
		}
		else_if = {
			limit = {
				has_idea = Valkist_influence_in_Siam5
			}
			remove_ideas = Valkist_influence_in_Siam5
		}
		else_if = {
			limit = {
				has_idea = Valkist_influence_in_Siam6
			}
			remove_ideas = Valkist_influence_in_Siam6
		}
		else_if = {
			limit = {
				has_idea = Valkist_influence_in_Siam
			}
			remove_ideas = Valkist_influence_in_Siam
		}
	}
}
SIA_recalc_for_idea = {
	SIA_remove_valkist_idea = yes
	SIA_calculate_valkist_influence = yes
	SIA_add_valkist_idea = yes
}
